{% load static %}
<header>
	<div class="header-gradient">
		<div class="container">
            <a href="{% url 'train' %}" id="brand-name" style="display: flex;">
                <div class="logo">
                    <img src="{% static "img/logo.png" %}" alt="КОЛИБРИНА - Логотип">
                </div>
                <div class="caption">
                    <h1>Колибрина</h1>
                    <h2>Интеллектуальные игры для знатоков</h2>
                </div>
            </a>
            <div id="online">ONLINE: <span></span></div>

        </div>
	</div>
	<nav>
		<a href="{% url 'account' %}"><span>Личный кабинет</span></a>
		<a href="{% url 'tournaments' %}">
            {% if request.resolver_match.url_name == 'train' or request.resolver_match.url_name == 'result-games' %}
                <span class="select">Турниры</span>
            {% else %}
                <span>Турниры</span>
            {% endif %}
        </a>
		<a href="{% url 'ratings' %}"><span>Рейтинги</span></a>
		<a href="{% url 'questions' %}"><span>Добавить вопрос в базу</span></a>
		<a href="{% url 'rules' %}"><span>Правила</span></a>
		<a href="{% url 'chat' %}"><span>Чат</span></a>
		{% if not request.user.is_authenticated %}
            <a href="{% url 'login' %}"><span>Вход/Регистрация</span></a>
            {% else %}
                <a href="{% url 'logout' %}"><span>Выход</span></a>
        {% endif %}
	</nav>
</header>
<div class="title">
    <h2><strong>{{ title }}</strong></h2>
</div>
{% if errors %}
    <br>
    <div class="error container">
        <p class="al-center">ERROR</p><br>
        {% for err in errors %}
            <p class="error al-center"><a href="{{ err.link }}">{{ err.tlink }}</a>{{ err.error }}</p>
        {% endfor %}
    </div>
{% endif %}
    <script>
        const onlineSocket = new WebSocket(
            'ws://' + window.location.host + '/ws/online/'
        );

        onlineSocket.onmessage = (e) => {
            const data = JSON.parse(e.data);
            document.querySelector('#online span').textContent = data
        }
        onlineSocket.onclose = function(e) {
            console.error('Online socket closed unexpectedly.', e);
            };
        </script>
<div id="modal_notification"></div>

        <script>
            function show_modal_notification(text){
                let notification = document.getElementById('modal_notification')
                notification.innerText = text
                notification.style.opacity = '1'
                notification.style.top = '1vh'
                setTimeout(()=>{
                notification.style.opacity = ''
                notification.style.top = ''
                }, 5000)
            }
        </script>